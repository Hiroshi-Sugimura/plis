<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>public/js/subHAL.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://hiroshi-sugimura.github.io/plis/" target="_blank" class="menu-item" id="forum_link" >Website</a></h2><h2><a href="https://github.com/Hiroshi-Sugimura/plis" target="_blank" class="menu-item" id="website_link" >Github</a></h2><h3>Namespaces</h3><ul><li><a href="subCalendar.html">subCalendar</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subCalendar.html#.checkDate">checkDate</a></li><li data-type='method' style='display: none;'><a href="subCalendar.html#.createProcess">createProcess</a></li><li data-type='method' style='display: none;'><a href="subCalendar.html#.isHoliday">isHoliday</a></li><li data-type='method' style='display: none;'><a href="subCalendar.html#.isToday">isToday</a></li><li data-type='method' style='display: none;'><a href="subCalendar.html#.showProcess">showProcess</a></li></ul></li><li><a href="subClock.html">subClock</a></li><li><a href="subEL.html">subEL</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subEL.html#.convRT">convRT</a></li><li data-type='method' style='display: none;'><a href="subEL.html#.renewCanvasSubESM">renewCanvasSubESM</a></li></ul></li><li><a href="subELcontrol.html">subELcontrol</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subELcontrol.html#.colorButton">colorButton</a></li></ul></li><li><a href="subESM.html">subESM</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subESM.html#.convRT">convRT</a></li><li data-type='method' style='display: none;'><a href="subESM.html#.renewCanvasESM">renewCanvasESM</a></li></ul></li><li><a href="subHAL.html">subHAL</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subHAL.html#.btnQuestionnaireSubmit_click">btnQuestionnaireSubmit_click</a></li><li data-type='method' style='display: none;'><a href="subHAL.html#.ranking">ranking</a></li><li data-type='method' style='display: none;'><a href="subHAL.html#.renewMajorResults">renewMajorResults</a></li><li data-type='method' style='display: none;'><a href="subHAL.html#.renewMinorResults">renewMinorResults</a></li></ul></li><li><a href="subHue.html">subHue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subHue.html#.dlgHuePush_oncancel">dlgHuePush_oncancel</a></li></ul></li><li><a href="subIkea.html">subIkea</a></li><li><a href="subJma.html">subJma</a></li><li><a href="subNetatmo.html">subNetatmo</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subNetatmo.html#.newLegendClickHandler">newLegendClickHandler</a></li><li data-type='method' style='display: none;'><a href="subNetatmo.html#.renewCanvasNetatmo">renewCanvasNetatmo</a></li></ul></li><li><a href="subOmron.html">subOmron</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subOmron.html#.newLegendClickHandler">newLegendClickHandler</a></li><li data-type='method' style='display: none;'><a href="subOmron.html#.renewCanvasOmron">renewCanvasOmron</a></li></ul></li><li><a href="subOwm.html">subOwm</a></li><li><a href="subQuestionnaire.html">subQuestionnaire</a></li><li><a href="subSwitchBot.html">subSwitchBot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="subSwitchBot.html#.newLegendClickHandler">newLegendClickHandler</a></li><li data-type='method' style='display: none;'><a href="subSwitchBot.html#.renewCanvasSwitchBot">renewCanvasSwitchBot</a></li></ul></li><li><a href="subSystem.html">subSystem</a></li><li><a href="subToast.html">subToast</a></li><li><a href="subUser.html">subUser</a></li><li><a href="window_.html">window</a><ul class='methods'><li data-type='method' style='display: none;'><a href="window_.html#.ELAAirconChangeMode">ELAAirconChangeMode</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELAirconShowControlDialog">ELAirconShowControlDialog</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELConfigSaved">ELConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELLightingScineButton">ELLightingScineButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELSendTest">ELSendTest</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELSettings">ELSettings</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELUpdateLocation">ELUpdateLocation</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELUpdateSettings">ELUpdateSettings</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELpowButton">ELpowButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ELpowButton">ELpowButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ESMConfigSaved">ESMConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HALdeleteApiTokenResponse">HALdeleteApiTokenResponse</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HALgetUserProfileResponse">HALgetUserProfileResponse</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HALsetApiTokenResponse">HALsetApiTokenResponse</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HALsyncResponse">HALsyncResponse</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HueConfigSaved">HueConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HuePowButton">HuePowButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.HueRename">HueRename</a></li><li data-type='method' style='display: none;'><a href="window_.html#.IkeaConfigSaved">IkeaConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.IkeaPowButton">IkeaPowButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.JmaConfigSaved">JmaConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.NetatmoConfigSaved">NetatmoConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.OmronConfigSaved">OmronConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.OwmConfigSaved">OwmConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.SwitchBotConfigSaved">SwitchBotConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.SwitchBotPlug">SwitchBotPlug</a></li><li data-type='method' style='display: none;'><a href="window_.html#.SystemConfigSaved">SystemConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.URLopen">URLopen</a></li><li data-type='method' style='display: none;'><a href="window_.html#.UserConfigSaved">UserConfigSaved</a></li><li data-type='method' style='display: none;'><a href="window_.html#.addToast">addToast</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnCalendarRenewSyukujitsu_Click">btnCalendarRenewSyukujitsu_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnDeleteHalApiToken_Click">btnDeleteHalApiToken_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnELConfigSet_Click">btnELConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnESMConfigSet_Click">btnESMConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnHALsync_Click">btnHALsync_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnHueConfigSet_Click">btnHueConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnIkeaConfigSet_Click">btnIkeaConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnJmaConfigSet_Click">btnJmaConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnNetatmoConfigSet_Click">btnNetatmoConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnNetworkConfigSet_Click">btnNetworkConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnOmronConfigSet_Click">btnOmronConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnOwmConfigSet_Click">btnOwmConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnSetHalApiTokenBtn_Click">btnSetHalApiTokenBtn_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnSwitchBotConfigSet_Click">btnSwitchBotConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnSystemConfigSet_Click">btnSystemConfigSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.btnUserProfileSet_Click">btnUserProfileSet_Click</a></li><li data-type='method' style='display: none;'><a href="window_.html#.calendarNext">calendarNext</a></li><li data-type='method' style='display: none;'><a href="window_.html#.calendarPrev">calendarPrev</a></li><li data-type='method' style='display: none;'><a href="window_.html#.createControlELButton">createControlELButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.disconnectedESM">disconnectedESM</a></li><li data-type='method' style='display: none;'><a href="window_.html#.disconnectedOmron">disconnectedOmron</a></li><li data-type='method' style='display: none;'><a href="window_.html#.esmDocSectionClicked">esmDocSectionClicked</a></li><li data-type='method' style='display: none;'><a href="window_.html#.getQuestionnaire">getQuestionnaire</a></li><li data-type='method' style='display: none;'><a href="window_.html#.hueLinked">hueLinked</a></li><li data-type='method' style='display: none;'><a href="window_.html#.ikeaLinked">ikeaLinked</a></li><li data-type='method' style='display: none;'><a href="window_.html#.inJmaArea_Change">inJmaArea_Change</a></li><li data-type='method' style='display: none;'><a href="window_.html#.makeJmaArea">makeJmaArea</a></li><li data-type='method' style='display: none;'><a href="window_.html#.netatmoDocSectionClicked">netatmoDocSectionClicked</a></li><li data-type='method' style='display: none;'><a href="window_.html#.omronDocSectionClicked">omronDocSectionClicked</a></li><li data-type='method' style='display: none;'><a href="window_.html#.onLoad">onLoad</a></li><li data-type='method' style='display: none;'><a href="window_.html#.openHueRenameDlg">openHueRenameDlg</a></li><li data-type='method' style='display: none;'><a href="window_.html#.pushHideButton">pushHideButton</a></li><li data-type='method' style='display: none;'><a href="window_.html#.redrawToast">redrawToast</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewELConfigView">renewELConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewESM">renewESM</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewESMConfigView">renewESMConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewEnergy">renewEnergy</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewEnergySubmeter">renewEnergySubmeter</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewFacilitiesEL">renewFacilitiesEL</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewFacilitiesHue">renewFacilitiesHue</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewFacilitiesIkea">renewFacilitiesIkea</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewFacilitiesSwitchBot">renewFacilitiesSwitchBot</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewHAL">renewHAL</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewHALConfigView">renewHALConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewHALProfile">renewHALProfile</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewHALToken">renewHALToken</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewHueConfigView">renewHueConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewHueLog">renewHueLog</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewIkeaConfigView">renewIkeaConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewIkeaLog">renewIkeaLog</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewJma">renewJma</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewJmaAbst">renewJmaAbst</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewJmaConfigView">renewJmaConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewJmaDetail">renewJmaDetail</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewNetatmo">renewNetatmo</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewNetatmoConfigView">renewNetatmoConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewOmron">renewOmron</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewOmronConfigView">renewOmronConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewOwm">renewOwm</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewOwmConfigView">renewOwmConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewRoomEnvNetatmo">renewRoomEnvNetatmo</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewRoomEnvOmron">renewRoomEnvOmron</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewRoomEnvSwitchBot">renewRoomEnvSwitchBot</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewSubESM">renewSubESM</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewSwitchBotConfigView">renewSwitchBotConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewSystemConfigView">renewSystemConfigView</a></li><li data-type='method' style='display: none;'><a href="window_.html#.renewUserConfigView">renewUserConfigView</a></li></ul></li><li><a href="window.ipc.html">ipc</a></li></ul><h3>Modules</h3><ul><li><a href="module-main.html">main</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-main.html#~createShortCut">createShortCut</a></li><li data-type='method' style='display: none;'><a href="module-main.html#~createWindow">createWindow</a></li><li data-type='method' style='display: none;'><a href="module-main.html#~menuInitialize">menuInitialize</a></li><li data-type='method' style='display: none;'><a href="module-main.html#~saveConfig">saveConfig</a></li><li data-type='method' style='display: none;'><a href="module-main.html#~savePersist">savePersist</a></li></ul></li><li><a href="module-mainArp.html">mainArp</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainArp.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~stopWithoutSave">stopWithoutSave</a></li><li data-type='method' style='display: none;'><a href="module-mainArp.html#~toMAC">toMAC</a></li></ul></li><li><a href="module-mainCalendar.html">mainCalendar</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainCalendar.html#~getHolidays">getHolidays</a></li><li data-type='method' style='display: none;'><a href="module-mainCalendar.html#~start">start</a></li></ul></li><li><a href="module-mainEL.html">mainEL</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainEL.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~getStatic">getStatic</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~getTodayElectricEnergy_submeter">getTodayElectricEnergy_submeter</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~init">init</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~observation">observation</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~received">received</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~search">search</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~sendMsg">sendMsg</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~sendOPC1">sendOPC1</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~sendTodayEnergy">sendTodayEnergy</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~setCron">setCron</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~sleep">sleep</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainEL.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainESM.html">mainESM</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainESM.html#~getCases">getCases</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~getRows">getRows</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~getTodayElectricEnergy">getTodayElectricEnergy</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~observe">observe</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~received">received</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~renewPortList">renewPortList</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~sendTodayEnergy">sendTodayEnergy</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~startCore">startCore</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainESM.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainHALlocal.html">mainHALlocal</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~calcMajorResults">calcMajorResults</a></li><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~getLastData">getLastData</a></li><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~getToday">getToday</a></li><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~initialize">initialize</a></li><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~roundMajorFloat">roundMajorFloat</a></li><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~submitQuestionnaire">submitQuestionnaire</a></li><li data-type='method' style='display: none;'><a href="module-mainHALlocal.html#~truncatelogs">truncatelogs</a></li></ul></li><li><a href="module-mainHALsync.html">mainHALsync</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~ConfigSave">ConfigSave</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~deleteHalApiToken">deleteHalApiToken</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~getHalUserProfileRequest">getHalUserProfileRequest</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~httpGetRequest">httpGetRequest</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~httpPostRequest">httpPostRequest</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~renewConfigView">renewConfigView</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~setHalApiTokenRequest">setHalApiTokenRequest</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~startSync">startSync</a></li><li data-type='method' style='display: none;'><a href="module-mainHALsync.html#~startUploadEldata">startUploadEldata</a></li></ul></li><li><a href="module-mainHue.html">mainHue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainHue.html#~cancel">cancel</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~control">control</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~dummy">dummy</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~received">received</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~startCore">startCore</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~startObserve">startObserve</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~stopObserve">stopObserve</a></li><li data-type='method' style='display: none;'><a href="module-mainHue.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainIkea.html">mainIkea</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~observe">observe</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~received">received</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~startCore">startCore</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainIkea.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainJma.html">mainJma</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainJma.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~gets">gets</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~parseAbst">parseAbst</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~parseAbstRaw">parseAbstRaw</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~parseDetail">parseDetail</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~parseDetailRaw">parseDetailRaw</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~setObserve">setObserve</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainJma.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainNetatmo.html">mainNetatmo</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~getCases">getCases</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~getRows">getRows</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~getTodayRoomEnv">getTodayRoomEnv</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~sendTodayRoomEnv">sendTodayRoomEnv</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~setObserve">setObserve</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainNetatmo.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainOmron.html">mainOmron</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~getCases">getCases</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~getRows">getRows</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~getTodayRoomEnv">getTodayRoomEnv</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~sendTodayRoomEnv">sendTodayRoomEnv</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainOmron.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainOwm.html">mainOwm</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~setObserve">setObserve</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~startCore">startCore</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainOwm.html#~stopWithoutSave">stopWithoutSave</a></li></ul></li><li><a href="module-mainSubmodule.html">mainSubmodule</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainSubmodule.html#~getNow">getNow</a></li><li data-type='method' style='display: none;'><a href="module-mainSubmodule.html#~getToday">getToday</a></li><li data-type='method' style='display: none;'><a href="module-mainSubmodule.html#~isObjEmpty">isObjEmpty</a></li><li data-type='method' style='display: none;'><a href="module-mainSubmodule.html#~mergeDeeply">mergeDeeply</a></li><li data-type='method' style='display: none;'><a href="module-mainSubmodule.html#~objectSort">objectSort</a></li></ul></li><li><a href="module-mainSwitchBot.html">mainSwitchBot</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~control">control</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getCases">getCases</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getHumidityRows">getHumidityRows</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getMeterList">getMeterList</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getPersist">getPersist</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getTempratureRows">getTempratureRows</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~getTodayRoomEnvSwitchBot">getTodayRoomEnvSwitchBot</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~renewFacilities">renewFacilities</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~sendTodayRoomEnv">sendTodayRoomEnv</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~stopObservation">stopObservation</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~stopWithoutSave">stopWithoutSave</a></li><li data-type='method' style='display: none;'><a href="module-mainSwitchBot.html#~storeData">storeData</a></li></ul></li><li><a href="module-mainSystem.html">mainSystem</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainSystem.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainSystem.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainSystem.html#~stop">stop</a></li></ul></li><li><a href="module-mainUser.html">mainUser</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-mainUser.html#~getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainUser.html#~setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-mainUser.html#~start">start</a></li><li data-type='method' style='display: none;'><a href="module-mainUser.html#~stop">stop</a></li></ul></li><li><a href="module-preload.html">preload</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-preload.html#~CalendarRenewHolidays">CalendarRenewHolidays</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ELStop">ELStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ELUse">ELUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ELsearch">ELsearch</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ESMUse">ESMUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ESMnotUse">ESMnotUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~Elsend">Elsend</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ElsendOPC1">ElsendOPC1</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALdeleteApiToken">HALdeleteApiToken</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALgetApiTokenRequest">HALgetApiTokenRequest</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALgetUserProfileRequest">HALgetUserProfileRequest</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALrenew">HALrenew</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALsetApiTokenRequest">HALsetApiTokenRequest</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALsubmitQuestionnaire">HALsubmitQuestionnaire</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HALsync">HALsync</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HueControl">HueControl</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HueUse">HueUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HueUseCancel">HueUseCancel</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~HueUseStop">HueUseStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~IkeaSend">IkeaSend</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~IkeaUse">IkeaUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~IkeaUseStop">IkeaUseStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~JmaConfigSave">JmaConfigSave</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~NetatmoStop">NetatmoStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~NetatmoUse">NetatmoUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~OmronStop">OmronStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~OmronUse">OmronUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~OwmStop">OwmStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~OwmUse">OwmUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~ScreenMode">ScreenMode</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~SwitchBotControl">SwitchBotControl</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~SwitchBotStop">SwitchBotStop</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~SwitchBotUse">SwitchBotUse</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~SystemSetConfig">SystemSetConfig</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~URLopen">URLopen</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~already">already</a></li><li data-type='method' style='display: none;'><a href="module-preload.html#~userProfileSave">userProfileSave</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="multicastSearch.html#event:click">click</a></li><li><a href="window.ipc.html#.event:to-renderer">to-renderer</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">public/js/subHAL.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//////////////////////////////////////////////////////////////////////
//	Copyright (C) SUGIMURA Lab. 2021.11.05
//	HAL 表示関係の処理
//////////////////////////////////////////////////////////////////////
'use strict'


////////////////////////////////////////////////////////////////////////////////
// HTMLロードしたら準備
/**
 * @namespace subHAL
 */
window.addEventListener('DOMContentLoaded', function () {
	console.dir('## DOMContentLoaded subHAL.js');

	// 内部変数
	let profile = { name: 'No Profile', UID: 'No Data', sex: 'No Data', age: 'No Data' };
	let majorResults = {};
	let minorResults = {};
	let minorkeyMeans = {};

	// HTML内部とリンク
	let divHALArea = document.getElementById('divHALArea');

	let divId = document.getElementById("divId");
	let divDatetime = document.getElementById("divDatetime");
	let divTotalPoint = document.getElementById("divTotalPoint");
	let divTotalRank = document.getElementById("divTotalRank");
	let divSLI = document.getElementById("divSLI");
	let divClothing = document.getElementById("divClothing");
	let divFood = document.getElementById("divFood");
	let divHousing = document.getElementById("divHousing");
	let divPhysicalHealth = document.getElementById("divPhysicalHealth");
	let divMentalHealth = document.getElementById("divMentalHealth");
	let divEcology = document.getElementById("divEcology");
	let divClothingRatio = document.getElementById('divClothingRatio');
	let divFoodRatio = document.getElementById('divFoodRatio');
	let divHousingRatio = document.getElementById('divHousingRatio');
	let divPhysicalRatio = document.getElementById('divPhysicalRatio');
	let divMentalRatio = document.getElementById('divMentalRatio');
	let divEcologyRatio = document.getElementById('divEcologyRatio');
	let divHALPoint = document.getElementById('divHALPoint');

	let divComment = document.getElementById("divComment");
	let imgKadecot = document.getElementById("imgKadecot");
	let imgSmartilab = document.getElementById("imgSmartilab");
	let imgSugilab = document.getElementById("imgSugilab");

	let canMajorRaderChart = document.getElementById("canMajorRaderChart");

	// 詳細
	let canClothingBarChart = document.getElementById("canClothingBarChart");
	let canFoodBarChart = document.getElementById("canFoodBarChart");
	let canHousingBarChart = document.getElementById("canHousingBarChart");
	let canPhysicalBarChart = document.getElementById("canPhysicalBarChart");
	let canMentalBarChart = document.getElementById("canMentalBarChart");
	let canEcologyBarChart = document.getElementById("canEcologyBarChart");

	// config
	let inHALApiKey = document.getElementById('inHALApiKey');  // HALApiKey
	let spanHALinfo = document.getElementById('spanHALinfo');  // tokenが登録されているとき
	let spanHALsuggenst = document.getElementById('spanHALsuggenst');  // token未登録のとき
	let pSetHalApiTokenErr = document.getElementById('pSetHalApiTokenErr');  // API登録エラー表示

	let inUserNickname = document.getElementById('inUserNickname');  // ニックネーム
	let inUserAge = document.getElementById('inUserAge');  // 年齢
	let inUserHeight = document.getElementById('inUserHeight');  // 身長
	let inUserWeight = document.getElementById('inUserWeight');  // 体重

	let btnSetHalApiToken = document.getElementById('btnSetHalApiToken');  // API Key登録ボタン
	let btnHALSync = document.getElementById('btnHALSync');  // HAL同期ボタン

	/** 
	 * @func renewMajorResults
	 * @desc 内部関数
	 * @memberof subHAL
	 * @param {void}
	 * @return {void}
	 */
	let renewMajorResults = function () {
		if (!majorResults) return;
		let clothingRatio = ranking(majorResults.clothingPoint);
		let foodRatio = ranking(majorResults.foodPoint);
		let housingRatio = ranking(majorResults.housingPoint);
		let physicalRatio = ranking(majorResults.physicalHealthPoint);
		let mentalRatio = ranking(majorResults.mentalHealthPoint);
		let ecologyRatio = ranking(majorResults.ecologyPoint);

		let majorRaderChart = new Chart(canMajorRaderChart, {
			type: 'radar',
			data: {
				labels: ["衣服・身だしなみ", "食事", "住居", "体の健康", "心の健康", "エコ度"],
				datasets: [{
					label: '今日のあなた',
					data: [majorResults.clothingPoint, majorResults.foodPoint, majorResults.housingPoint,
						   majorResults.physicalHealthPoint, majorResults.mentalHealthPoint, majorResults.ecologyPoint],
					backgroundColor: 'RGBA(225,95,150, 0.5)',
					borderColor: 'RGBA(225,95,150, 1)',
					borderWidth: 1,
					pointBackgroundColor: 'RGB(46,106,177)'
				}]
			},
			options: {
				responsive: true,
				title: {
					display: true,
					text: 'あなたの生活評価バランス',
					fontSize: '30'
				},
				scale: {
					r: {
						suggestedMax: 100,
						suggestedMin: 0,
						beginAtZero: true
					}
				}
			}
		});

		divId.innerHTML = profile.name;
		divDatetime.innerHTML = new Date(majorResults.updatedAt).toLocaleString();
		divTotalPoint.innerHTML = Math.round(majorResults.totalPoint * 10) / 10;
		divHALPoint.innerHTML = Math.round(majorResults.totalPoint * 10) / 10;
		divTotalRank.innerHTML = majorResults.totalRank;
		divSLI.innerHTML = majorResults.smartLifeIndex;
		divClothing.innerHTML = Math.round(majorResults.clothingPoint * 10) / 10;
		divFood.innerHTML = Math.round(majorResults.foodPoint * 10) / 10;
		divHousing.innerHTML = Math.round(majorResults.housingPoint * 10) / 10;
		divPhysicalHealth.innerHTML = Math.round(majorResults.physicalHealthPoint * 10) / 10;
		divMentalHealth.innerHTML = Math.round(majorResults.mentalHealthPoint * 10) / 10;
		divEcology.innerHTML = Math.round(majorResults.ecologyPoint * 10) / 10;

		divClothingRatio.innerHTML = clothingRatio;
		divFoodRatio.innerHTML = foodRatio;
		divHousingRatio.innerHTML = housingRatio;
		divPhysicalRatio.innerHTML = physicalRatio;
		divMentalRatio.innerHTML = mentalRatio;
		divEcologyRatio.innerHTML = ecologyRatio;

		divComment.innerHTML = majorResults.comments ? majorResults.comments : "この調子で頑張ろう！";
	};

	/** 
	 * @func renewMinorResults
	 * @memberof subHAL
	 * @desc 内部関数
	 * @param {void}
	 * @return {void}
	 */
	let renewMinorResults = function () {
		if (!minorResults) return;

		// 両方揃わないでグラフを作るとChart.jsがバグる
		if (Object.keys(minorResults).length == 0) return;
		if (Object.keys(minorkeyMeans).length == 0) return;

		let clothingLabels = [];
		let clothingData = [];
		let foodLabels = [];
		let foodData = [];
		let housingLabels = [];
		let housingData = [];
		let physicalLabels = [];
		let physicalData = [];
		let mentalLabels = [];
		let mentalData = [];
		let ecologyLabels = [];
		let ecologyData = [];

		Object.keys(minorkeyMeans).forEach(function (key) {
			let d = minorkeyMeans[key];
			switch (d.majorKey) {
				case 1:
				clothingLabels[d.minorKey - 1] = d.means;
				break;
				case 2:
				foodLabels[d.minorKey - 1] = d.means;
				break;
				case 3:
				housingLabels[d.minorKey - 1] = d.means;
				break;
				case 4:
				physicalLabels[d.minorKey - 1] = d.means;
				break;
				case 5:
				mentalLabels[d.minorKey - 1] = d.means;
				break;
				case 6:
				ecologyLabels[d.minorKey - 1] = d.means;
				break;
			}
		});

		Object.keys(minorkeyMeans).forEach(function (key) {
			let d = minorkeyMeans[key];
			switch (d.majorKey) {
				case 1:
				clothingData[d.minorKey - 1] = minorResults['r_' + d.majorKey + '_' + d.minorKey];
				break;
				case 2:
				foodData[d.minorKey - 1] = minorResults['r_' + d.majorKey + '_' + d.minorKey];
				break;
				case 3:
				housingData[d.minorKey - 1] = minorResults['r_' + d.majorKey + '_' + d.minorKey];
				break;
				case 4:
				physicalData[d.minorKey - 1] = minorResults['r_' + d.majorKey + '_' + d.minorKey];
				break;
				case 5:
				mentalData[d.minorKey - 1] = minorResults['r_' + d.majorKey + '_' + d.minorKey];
				break;
				case 6:
				ecologyData[d.minorKey - 1] = minorResults['r_' + d.majorKey + '_' + d.minorKey];
				break;
			}
		});


		// 衣類
		let clothingBarCart = new Chart(canClothingBarChart, {
			type: 'bar',
			data: {
				labels: clothingLabels,
				datasets: [
					{
						label: 'あなたの衣服・身だしなみの点数',
						data: clothingData,
						backgroundColor: "#dda0dd"
					}
					]
			},
			options: {
				title: {
					display: true,
					text: '衣服・身だしなみ'
				},
				scales: {
					y: {
						suggestedMax: 100,
						suggestedMin: 0
					}
				}
			}
		});


		// 食
		let foodBarChart = new Chart(canFoodBarChart, {
			type: 'bar',
			data: {
				labels: foodLabels,
				datasets: [
					{
						label: 'あなたの食事の点数',
						data: foodData,
						backgroundColor: "#ffa500"

					}
					]
			},
			options: {
				title: {
					display: true,
					text: '食事'
				},
				scales: {
					y: {
						suggestedMax: 100,
						suggestedMin: 0
					}
				}
			}
		});

		// 住居
		let housingBarChart = new Chart(canHousingBarChart, {
			type: 'bar',
			data: {
				labels: housingLabels,
				datasets: [
					{
						label: 'あなたの住居の点数',
						data: housingData,
						backgroundColor: "#6495ed"

					}
					]
			},
			options: {
				title: {
					display: true,
					text: '住居'
				},
				scales: {
					y: {
						suggestedMax: 100,
						suggestedMin: 0
					}
				}
			}
		});

		// 体
		let physicalBarChart = new Chart(canPhysicalBarChart, {
			type: 'bar',
			data: {
				labels: physicalLabels,
				datasets: [
					{
						label: 'あなたの体の健康の点数',
						data: physicalData,
						backgroundColor: "#9acd32"

					}
					]
			},
			options: {
				title: {
					display: true,
					text: '体の健康'
				},
				scales: {
					y: {
						suggestedMax: 100,
						suggestedMin: 0
					}
				}
			}
		});

		// 心
		let mentalBarChart = new Chart(canMentalBarChart, {
			type: 'bar',
			data: {
				labels: mentalLabels,
				datasets: [
					{
						label: 'あなたの心の健康の点数',
						data: mentalData,
						backgroundColor: "#ffc0cb"

					}
					]
			},
			options: {
				title: {
					display: true,
					text: '心の健康'
				},
				scales: {
					y: {
						suggestedMax: 100,
						suggestedMin: 0
					}
				}
			}
		});

		// エコ
		let ecologyBarChart = new Chart(canEcologyBarChart, {
			type: 'bar',
			data: {
				labels: ecologyLabels,
				datasets: [
					{
						label: 'あなたのエコ度の点数',
						data: ecologyData,
						backgroundColor: "#c0c0c0"
					}
					]
			},
			options: {
				title: {
					display: true,
					text: 'エコ度'
				},
				scales: {
					y: {
						suggestedMax: 100,
						suggestedMin: 0
					}
				}
			}
		});
	};

	/** 
	 * @func ranking
	 * @memberof subHAL
	 * @desc 内部関数，ランク付け
	 * @param {void}
	 * @return {void}
	 */
	let ranking = function (point) {
		return point >= 90 ? 'SSS'
			: point >= 80 ? 'SS'
				: point >= 70 ? 'S'
					: point >= 60 ? 'A'
						: point >= 50 ? 'B'
							: point >= 40 ? 'C'
								: point >= 30 ? 'D'
									: point >= 20 ? 'E'
										: 'F';
	};


	/** 
	 * @func window.renewHALProfile
	 * @desc Profileもらって画面更新
	 * @param {void}
	 * @return {void}
	 */
	window.renewHALProfile = function (_profile) {
		profile = _profile;
		divId.innerHTML = profile.name;

		// HALのデータを優先し、read onlyにする
		inUserNickname.value = profile.name;
		inUserNickname.readOnly = true;
		inUserAge.value = profile.age;
		inUserAge.readOnly = true;
		// inUserHeight.value   = profile.height;
		// inUserWeight.value   = profile.weight;
	};

	////////////////////////////////////////////////////////////////////////////////
	// GUIのボタン

	/** 
	 * @func window.btnDeleteHalApiToken_Click
	 * @desc HAL API トークン設定削除ボタンが押されたときの処理
	 * @param {void}
	 * @return {void}
	 */
	window.btnDeleteHalApiToken_Click = function () {
		window.ipc.HALdeleteApiToken();
	};

	// HAL API Key登録ボタンクリック
	let timer;  // HALからの応答待ち、タイムアウトタイマー

	/** 
	 * @func window.btnSetHalApiTokenBtn_Click
	 * @desc window.btnSetHalApiTokenBtn_Click
	 * @param {void}
	 * @return {void}
	 */
	window.btnSetHalApiTokenBtn_Click = function () {
		pSetHalApiTokenErr.textContent = '';
		btnSetHalApiToken.disabled = true;

		let HALtoken = inHALApiKey.value;
		let err = '';
		if (!HALtoken) {
			err = 'API トークンを入力してください。';
		} else if (!/^[\x21-\x7e]+$/.test(HALtoken)) {
			err = 'API トークンに不適切な文字が含まれています。';
		}

		if (err) {
			pSetHalApiTokenErr.textContent = err;
			btnSetHalApiToken.disabled = false;
			return;
		}

		let HAL_REQUEST_TIMEOUT = 5000;

		timer = setTimeout(() => {
			pSetHalApiTokenErr.textContent = 'TIMEOUT: HAL の応答がありませんでした。';
			btnSetHalApiToken.disabled = false;
		}, HAL_REQUEST_TIMEOUT);

		window.ipc.HALsetApiTokenRequest(HALtoken);
	};

	/** 
	 * @func window.btnHALsync_Click
	 * @desc HAL同期ボタンが押されたときの処理
	 * @param {void}
	 * @return {void}
	 */
	window.btnHALsync_Click = function () {
		btnHALSync.disabled = true;
		btnHALSync.textContent = '同期中…';
		window.ipc.HALsync();
	};


	////////////////////////////////////////////////////////////////////////////////
	// mainプロセスから呼ばれるやつ

	//----------------------------------------------------------------
	/** 
	 * @func window.renewHALConfigView
	 * @desc configデータをもらって画面更新
	 * @param {void}
	 * @return {void}
	 */
	window.renewHALConfigView = function (config) {
		// 取得したトークンが有効かどうかを確認するために HAL ユーザープロファイルを取得
		if (config.halApiToken) {
			inHALApiKey.value = config.halApiToken;
			window.ipc.HALgetUserProfileRequest();
		}else{
			inHALApiKey.value = "";  // undefined がテキストボックスに表示されないように
		}
	};

	/** 
	 * @func window.renewHALToken
	 * @desc HAL Tokenに変更があったら呼ばれる
	 * @param {void}
	 * @return {void}
	 */
	window.renewHALToken = async function (HALtoken) {
		console.log('renewHALToken(): HALtoken:', HALtoken);

		// 取得したトークンが有効かどうかを確認するために HAL ユーザープロファイルを取得
		if (HALtoken) {
			inHALApiKey.value = HALtoken;
			window.ipc.HALgetUserProfileRequest();
		} else {
			spanHALinfo.style.display     = 'none';  // 同期済み情報表示
			spanHALsuggenst.style.display = 'block';   // 同期済み情報表示
			inHALApiKey.value = "";  // undefined がテキストボックスに表示されないように
		}
	};

	//----------------------------------------------------------------
	/** 
	 * @func window.renewHAL
	 * @desc データをもらって画面更新
	 * @param {void}
	 * @return {void}
	 */
	window.renewHAL = function (MajorResults, MinorResults, MinorkeyMeans) {
		majorResults = MajorResults;
		renewMajorResults();

		minorResults = MinorResults;
		renewMinorResults();

		minorkeyMeans = MinorkeyMeans;
		renewMinorResults();
	};


	//----------------------------------------------------------------
	/** 
	 * @func window.HALsyncResponse
	 * @desc HAL cloud: 同期の応答、同期処理終了
	 * @param {void}
	 * @return {void}
	 */
	window.HALsyncResponse = function ( arg ) {
		console.log( 'main -> HALsyncResponse:' );
		if(arg?.error) {
			alert(arg.error);
		}else{
			syncBtn.disabled = false;
			syncBtn.textContent = '同期開始';
			window.ipc.HALrenew();			// 同期成功したなら最新のHALもらう
		}
	}

	//----------------------------------------------------------------
	/** 
	 * @func window.HALsetApiTokenResponse
	 * @desc HAL API登録完了したら呼ばれる
	 * @param {void}
	 * @return {void}
	 */
	window.HALsetApiTokenResponse = function (res) {
		console.log('window.HALsetApiTokenResponse() res:', res);

		if (timer) {
			clearTimeout(timer);
		}
		if (res.error) {
			pSetHalApiTokenErr.textContent = res.error;
		} else {
			btnHALSync.style.display      = 'block';  // 同期ボタン表示
			spanHALinfo.style.display     = 'block';  // 同期済み情報表示
			spanHALsuggenst.style.display = 'none';   // 同期済み情報表示
			window.addToast('Info', 'HAL 連携が成功しました。');
			window.renewHALToken(inHALApiKey.value);
			// configSave();

			// 同期もする
			btnHALSync.disabled = true;
			btnHALSync.textContent = '同期中…';
			window.ipc.HALsync();
		}
	};


	//----------------------------------------------------------------
	/** 
	 * @func window.HALdeleteApiTokenResponse
	 * @desc HAL API トークン設定削除の応答、HALとの同期をやめた場合、mainから応答があって実行
	 * @param {void}
	 * @return {void}
	 */
	window.HALdeleteApiTokenResponse = function () {
		console.log('window.HALdeleteApiTokenResponse()');
		divHALArea.style.display = 'none';  // 同期ボタン非表示
		window.addToast('Info', 'HAL 連携設定を削除しました。');
		window.renewHALToken(null);
	};


	//----------------------------------------------------------------
	/** 
	 * @func window.HALgetUserProfileResponse
	 * @desc HAL ユーザープロファイル取得の応答
	 * @param {void}
	 * @return {void}
	 */
	window.HALgetUserProfileResponse = function (res) {
		console.log('window.HALgetUserProfileResponse() res:', res);
		// 取得したトークンが有効かどうかを確認するために HAL ユーザープロファイルを取得
		if (inHALApiKey.value) {
			try {
				window.renewHALProfile(res.profile);
			} catch (error) {
				console.error(error);
				pSetHalApiTokenErr.textContent = error.message;
			}
		} else {
			inHALApiKey.value = "";  // undefined がテキストボックスに表示されないように
		}

		if (inHALApiKey.value &amp;&amp; inHALApiKey.value != 'null' &amp;&amp; res.profile) {  // API OK
			divHALArea.style.display = 'block';  // 同期ボタン表示
			spanHALinfo.style.display = 'block';
			spanHALsuggenst.style.display = 'none';
		} else {
			divHALArea.style.display = 'none';  // 同期ボタン表示
			spanHALinfo.style.display = 'none';
			spanHALsuggenst.style.display = 'block';
		}
	};


	//================================================================
	/** 
	 * @func btnQuestionnaireSubmit_click
	 * @memberof subHAL
	 * @desc local HAL, アンケート回答の投稿ボタンを押したときの処理
	 * @param {void}
	 * @return {void}
	 */
	btnQuestionnaireSubmit.addEventListener('click', function () {
		let submitData = window.getQuestionnaire();

		if (submitData != null) {
			// HAL にアンケート回答が POST される。
			window.ipc.HALsubmitQuestionnaire(submitData);
		}
	});

});

</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Thu Jun 01 2023 08:45:26 GMT+0900 (日本標準時) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
